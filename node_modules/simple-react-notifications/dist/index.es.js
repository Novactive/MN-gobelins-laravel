import e,{useState as t,useRef as n,useEffect as i}from"react";import{render as r}from"react-dom";const s={ids:[],add:function(e,t){this.ids.push({id:e,callback:t})},remove:function(e){if(e){const{callback:t}=this.ids.find(t=>t.id===e);t(),this.ids=this.ids.filter(t=>t.id!==e)}else this.ids.forEach(e=>e.callback()),this.ids=[]}},o=({message:t,onClose:n,type:i="info",width:r="300px",rtl:s,closeOnClick:o,onMouseEnter:a,onMouseLeave:c})=>e.createElement("div",{className:`item ${i} ${s?"rtl":"ltr"}`,style:{width:r},onClick:()=>o&&n(),onMouseEnter:a,onMouseLeave:c},e.createElement("span",null,t),e.createElement("button",{onClick:n},"âœ–")),a={};function c(e,t){let n=-1,i=0;this.remaining=t,this.pause=()=>{clearTimeout(n),this.remaining-=Date.now()-i},this.resume=()=>{i=Date.now(),clearTimeout(n),n=setTimeout(e,this.remaining)},this.resume()}var l=r=>{const[,l]=t([]),[m,u]=t(!1),[d,h]=t(!1),p=n([]),{autoClose:f=3e3,delay:y=0,id:g}=r,{animation:E={}}=r,v=E.duration||300,b=f||1e9,$=e=>{p.current=((e,t)=>e.filter(e=>e.key!=t))(p.current,e),l(p.current),0===p.current.length&&r.cleared()};return i(()=>{const t=p.current.findIndex(e=>e.key==g),n=p.current[t];if(!n)return;const i=a[g].remaining,r=m&&!d?{}:{animationName:`${E.out}`,animationDelay:`${i-v}ms`,animationDuration:`${v}ms`},s=e.cloneElement(n,Object.assign({},n.props,{style:r}));p.current.splice(t,1,s),l([...p.current])},[m,d]),i(()=>{const t={id:g,onClose:()=>{setTimeout(()=>$(g),v),a[g].remaining=v,h(!0)},onMouseEnter:()=>n("pause"),onMouseLeave:()=>n("resume")},n=e=>{r.pauseOnHover&&a[g]&&a[g][e](),u("pause"===e)};let i=r.render?r.render(t):e.createElement(o,Object.assign({},r,t));v&&(i=e.createElement("div",{key:g,style:{animationName:`${E.in}, ${E.out}`,animationDelay:`0ms, ${b}ms`,animationDuration:`${v}ms, ${v}ms`}},i));const m=r.onlyLast?[]:p.current,{newestOnTop:d=!0}=r;p.current=d?[i,...m]:[...m,i],s.add(g,()=>$(g)),setTimeout(()=>l(p.current),y),a[g]=new c(()=>f&&$(g),y+f+v)},[r]),e.createElement(e.Fragment,null,p.current)};const m="simple-react-notifier";let u,d=0;const h=t=>{t=Object.assign({},u||{},t);const{position:n="top-right"}=t;let i=document.querySelector("."+m+"."+n);return i||((i=document.createElement("div")).classList.add(m,n),i.style.direction=t.rtl?"rtl":"ltr",document.body.appendChild(i)),r(e.createElement(l,Object.assign({},t,{id:d,cleared:()=>{try{document.body.removeChild(i)}catch(e){}}})),i),++d-1};["info","success","error"].forEach(e=>h[e]=t=>h({message:t,type:e})),h.configure=e=>{u=e},h.dismiss=e=>s.remove(e);export default h;
//# sourceMappingURL=index.es.js.map
