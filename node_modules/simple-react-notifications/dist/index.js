"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),React__default=_interopDefault(React),reactDom=require("react-dom");const eventManager={ids:[],add:function(e,t){this.ids.push({id:e,callback:t})},remove:function(e){if(e){const{callback:t}=this.ids.find(t=>t.id===e);t(),this.ids=this.ids.filter(t=>t.id!==e)}else this.ids.forEach(e=>e.callback()),this.ids=[]}},filter=(e,t)=>e.filter(e=>e.key!=t),Notification=({message:e,onClose:t,type:i="info",width:n="300px",rtl:a,closeOnClick:r,onMouseEnter:o,onMouseLeave:s})=>React__default.createElement("div",{className:`item ${i} ${a?"rtl":"ltr"}`,style:{width:n},onClick:()=>r&&t(),onMouseEnter:o,onMouseLeave:s},React__default.createElement("span",null,e),React__default.createElement("button",{onClick:t},"âœ–")),timers={};function Timer(e,t){let i=-1,n=0;this.remaining=t,this.pause=()=>{clearTimeout(i),this.remaining-=Date.now()-n},this.resume=()=>{n=Date.now(),clearTimeout(i),i=setTimeout(e,this.remaining)},this.resume()}var NotificationContainer=e=>{const[,t]=React.useState([]),[i,n]=React.useState(!1),[a,r]=React.useState(!1),o=React.useRef([]),{autoClose:s=3e3,delay:c=0,id:l}=e,{animation:u={}}=e,d=u.duration||300,m=s||1e9,f=i=>{o.current=filter(o.current,i),t(o.current),0===o.current.length&&e.cleared()};return React.useEffect(()=>{const e=o.current.findIndex(e=>e.key==l),n=o.current[e];if(!n)return;const r=timers[l].remaining,s=i&&!a?{}:{animationName:`${u.out}`,animationDelay:`${r-d}ms`,animationDuration:`${d}ms`},c=React__default.cloneElement(n,Object.assign({},n.props,{style:s}));o.current.splice(e,1,c),t([...o.current])},[i,a]),React.useEffect(()=>{const i={id:l,onClose:()=>{setTimeout(()=>f(l),d),timers[l].remaining=d,r(!0)},onMouseEnter:()=>a("pause"),onMouseLeave:()=>a("resume")},a=t=>{e.pauseOnHover&&timers[l]&&timers[l][t](),n("pause"===t)};let g=e.render?e.render(i):React__default.createElement(Notification,Object.assign({},e,i));d&&(g=React__default.createElement("div",{key:l,style:{animationName:`${u.in}, ${u.out}`,animationDelay:`0ms, ${m}ms`,animationDuration:`${d}ms, ${d}ms`}},g));const p=e.onlyLast?[]:o.current,{newestOnTop:_=!0}=e;o.current=_?[g,...p]:[...p,g],eventManager.add(l,()=>f(l)),setTimeout(()=>t(o.current),c),timers[l]=new Timer(()=>s&&f(l),c+s+d)},[e]),React__default.createElement(React__default.Fragment,null,o.current)};const cls="simple-react-notifier";let globalCfg,id=0;const notifier=e=>{e=Object.assign({},globalCfg||{},e);const{position:t="top-right"}=e;let i=document.querySelector("."+cls+"."+t);return i||((i=document.createElement("div")).classList.add(cls,t),i.style.direction=e.rtl?"rtl":"ltr",document.body.appendChild(i)),reactDom.render(React__default.createElement(NotificationContainer,Object.assign({},e,{id:id,cleared:()=>{try{document.body.removeChild(i)}catch(e){}}})),i),++id-1};["info","success","error"].forEach(e=>notifier[e]=t=>notifier({message:t,type:e})),notifier.configure=e=>{globalCfg=e},notifier.dismiss=e=>eventManager.remove(e),exports.default=notifier;
//# sourceMappingURL=index.js.map
